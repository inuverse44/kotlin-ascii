# 概念学習: ランベルトの余弦則とベクトルの内積

## 対象コード
`src/main/kotlin/com/app/lighting/PointLight.kt`

## 疑問点
「ランベルトの余弦則」とは何か？ コード上では単にベクトルの内積をとっているだけに見えるが、どう結びついているのか？

## 解説

### 1. 数学的な結びつき：内積 = 余弦（コサイン）
ランベルトの余弦則は、「面の明るさは光の入射角のコサイン（$\\cos\\theta$）に比例する」という法則です。
ベクトル演算において、2つの単位ベクトル（長さが1のベクトル）$A$ と $B$ の内積は以下のように定義されます：

$$A \cdot B = |A| |B| \cos\theta$$

ここで、$A$（面の法線）と $B$（光への方向）が単位ベクトルであれば、$|A|=1, |B|=1$ なので、

$$A \cdot B = \cos\theta$$

となります。つまり、**「単位ベクトルの内積を計算すること」そのものが「コサインを求めること」と同義**であり、ランベルトの余弦則を直接実装していることになります。

### 2. 物理的な意味：光のフラックス（エネルギー流入量）
この法則は、物理的には **「単位面積あたりの光エネルギーの流入量（放射照度）」** を抽象化したものです。

*   **投影面積（受光断面積）の変化**:
    ある面積を持つ面を光に対して傾けると、光の方向から見たその面の「見かけの面積」は $\\cos\\theta$ の割合で小さくなります。
*   **フラックス密度の低下**:
    光の束（フラックス）が一定であれば、面が傾くほど単位面積あたりに降り注ぐ光の粒子の密度が低くなります。これが「暗くなる」という現象の正体です。

### 3. 直感的なイメージ：雨受けのバケツ
*   **垂直 ($\\theta = 0^\circ$)**: バケツを雨に対して真っ直ぐ向けると、最大の雨粒が入る（$\\cos 0^\circ = 1$）。
*   **傾斜 ($\\theta > 0^\circ$)**: バケツを傾けると、雨を受け止める口の面積が実質的に小さくなり、入る雨の量が減る。
*   **平行 ($\\theta = 90^\circ$)**: バケツを真横に向けると、雨粒は口を通り過ぎてしまい、一滴も入らない（$\\cos 90^\circ = 0$）。

## まとめ
CGの世界で内積が多用されるのは、この物理的な「エネルギー流入量の減衰」を、三角関数（`cos`関数）を直接呼び出すよりも圧倒的に高速に計算できるためです。

*   **法線ベクトルと光線ベクトルの向きが近い** ＝ 正面から光が当たる ＝ 明るい（内積が1に近い）
*   **法線ベクトルと光線ベクトルが直交する** ＝ 真横から光が当たる ＝ 暗い（内積が0）
